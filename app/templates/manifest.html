{# CTIDashy_Flask/app/templates/manifest.html #}
{% extends "base.html" %}
{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/manifest.css') }}">
{% endblock %}

{% block content %}
<div class="manifest-container">
    <div class="manifest-grid">
        <div class="manifest-files">
            <div class="manifest-header">
                <h3>system1 Files (Source of Truth)</h3>
                <button id="refresh-btn" class="refresh-button" title="Refresh list">
                    <span class="refresh-icon">â†»</span> Refresh
                </button>
            </div>
            <div id="system1-files" class="file-list">
                {% for file in system1_files %}
                <div class="file-item">
                    <div class="file-info">
                        <div class="file-name">{{ file.name }}</div>
                        <div class="file-size">{{ file.size }} KB</div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        
        <div class="manifest-files">
            <h3>system2 Files</h3>
            <div id="system2-files" class="file-list">
                {% for file in system2_files %}
                <div class="file-item">
                    <div class="file-info">
                        <div class="file-name">{{ file.name }}</div>
                        <div class="file-size">{{ file.size }} KB</div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>

    <div class="comparison-controls">
        <div class="selected-files">
            <div class="selected-file">
                <label>Source File:</label>
                <span id="source-selected" class="selected-name">Select source file</span>
            </div>
            <div class="selected-file">
                <label>Target File:</label>
                <span id="target-selected" class="selected-name">Select target file</span>
            </div>
        </div>
        <div class="control-buttons">
            <button onclick="compareAllManifests()" id="compare-all-btn">Compare All</button>
            <button onclick="compareManifests()" id="compare-btn" disabled>Compare Selected</button>
        </div>
    </div>

    <div id="comparison-results" class="comparison-results"></div>
</div>

<script src="{{ url_for('static', filename='js/manifest.js') }}"></script>
{% endblock %}